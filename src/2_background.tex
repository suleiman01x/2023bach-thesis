\chapter{背景}
\label{background}

本章では本研究の背景について述べる．

\section{ネットワーク音楽演奏}
ネットワークを介して複数の演奏者がリアルタイムで演奏を行うことをネットワーク音楽演奏と呼ぶ．
一概にネットワーク音楽演奏と言っても同じローカルネットワークに繋がった小規模なものから，インターネットを介して世界中の演奏者が繋がった大規模なものまで様々なものがある．
また演奏者の数も１対１のデュエットから，オーケストラ規模の多くの人を同時に繋げたシステムまで可能である．
そのうえ近年では音声だけでなく視覚情報を含めた視聴覚体験を提供するネットワーク音楽演奏のシステムも研究されている．

上記の通りネットワーク音楽演奏には様々なものがあるが，いずれも演奏者の音声をリアルタイムで相手に届けることが重要であり，これには主に二種類の方法がある．
音響情報をVoIPアプリケーションなどで送信する方法と，音声情報をMIDIやOSCなどの記号に圧縮し，抽象的なデータとして送信する方法である．

本研究では1対1のインターネットを介したネットワーク音楽演奏を想定し，後者の音声情報をOSCで送信する方法を用いる．

\subsection{ネットワーク音楽演奏システムの構造}
ネットワーク音楽演奏システムは大きく分けて送信と受信の２つの機能からなり，その工程を細分化すると８段階に分けられる．

1. 演奏者の音声入力
2. 入力された音のアナログ-デジタル変換
3. 音響情報の圧縮
4. ネットワークを介した送信
5. ネットワークを介した受信
6. 音響情報の復元
7. 音響情報のデジタル-アナログ変換
8. 演奏者の音声出力

\subsection{演奏者の音声入力}
演奏者が鳴らした楽器情報を取得するには主に二つの方法がある．
一つは楽器の音をマイクで拾い，音響情報として取得する方法であり，もう一つはMIDI信号を送る楽器を演奏して抽象的なデータとして取得する方法である．

\subsection{デジタル-アナログ変換}
MIDI楽器を用いて演奏した場合この工程は不要である．
音響情報をネットワークを介して送信する場合，音響情報をデジタルデータに変換する必要がある．
楽器の音をマイクで拾った後，アナログ-デジタル変換器 (ADC)とデジタル-アナログ変換器 (DAC)が搭載されているオーディオインターフェースを用いてデジタルデータに変換するのが一般的である．

\subsection{OpenSound Control}
OpenSound Control (OSC)は音響情報を記号に圧縮し，抽象的なデータとして送信するためのプロトコルである．

\section{ネットワーク音楽演奏における遅延}
遅延はネットワーク音楽演奏のしやすさに大きな影響を与える．
80ms以上の遅延があると演奏が困難になると言われている．

音楽演奏はおもに４拍単位で「１小節」と区切られ，その１小節を１周期と捉えると，遅延というのは以下のモデルのように１周期の中で「位相がズレる」ことで表現できる．

\begin{displaymath}
  y = \sin(x + \theta)
\end{displaymath}
↑↑あとで編集

\subsection{遅延の原因}
遅延は上記「ネットワーク音楽演奏システムの構造」のすべての工程において発生するが，特にネットワークを介した送信と受信の工程において発生する．
ーーー外国への遅延

\section{Adaptive Metronome}
BattelloらによるAdaptive Metronome\cite{admet}\cite{admet:experiment}は，演奏者の演奏をリアルタイムで分析し，演奏者の演奏に合わせてメトロノームのテンポを変化させるシステムである．
はじめに実装したAdaptive Metronomeは親子構造を持っている．
親の演奏者は演奏すると同時にシステムはリアルタイムでその演奏の拍を推定し，子演奏者に音声と拍情報を送信する．
子演奏者のシステムはその情報を受取り，親演奏者の演奏に合わせてメトロノームのテンポを変化させる．
またこのときメトロノームの音は親から子への遅延を考慮して位相をずれして再生される．

このシステムを用いた実験では120msの遅延下での演奏を行ったうえでも，被験者は抵抗を感じることなく演奏することができたという結果が得られた．\cite{admet}

\subsection{相互メトロノームの実験}
当初のAdaptive Metronomeの実験では，親演奏者の演奏を子演奏者が聴き，それに合わせて演奏するという形で実験が行われた．
後にBatteloらは親子構造を持たず，相互的にAdaptive Metronomeを聞きあう実験を行った．

\subsection{共通テンポの算出}
相互的にAdaptive Metronomeを聞きあう実験では，親子構造を持たないため，親の演奏者と子の演奏者のテンポと位相が異なる場合がある．
このとき２人の演奏者の状況を踏まえたうえで両方の演奏が同期するような共通のテンポを算出する必要がある．

\section{Tablanet}
Tablanet\cite{tablanet}は，タブラ奏者の演奏をリアルタイムで分析し，演奏者の演奏に合わせてタブラのテンポを変化させるシステムである．

\section{Alexandraki}
Alexandrakiらによる研究\cite{alexandraki:2013}\cite{alexandraki:2014}では，演奏者の演奏をリアルタイムで分析し，事前収録した演奏を実際の演奏に合わせて再生するシステムを提案している．
